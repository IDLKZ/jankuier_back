# üöÄ Locust Load Testing Guide

–≠—Ç–æ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é Locust –¥–ª—è –Ω–∞–≥—Ä—É–∑–æ—á–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è Jankuier Backend API.

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [–£—Å—Ç–∞–Ω–æ–≤–∫–∞](#—É—Å—Ç–∞–Ω–æ–≤–∫–∞)
- [–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç](#–±—ã—Å—Ç—Ä—ã–π-—Å—Ç–∞—Ä—Ç)
- [–î–æ—Å—Ç—É–ø–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è](#–¥–æ—Å—Ç—É–ø–Ω—ã–µ-—Å—Ü–µ–Ω–∞—Ä–∏–∏-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)
- [–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤](#–∑–∞–ø—É—Å–∫-—Ç–µ—Å—Ç–æ–≤)
- [–ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤](#–∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è-—Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤)
- [Best Practices](#best-practices)
- [Troubleshooting](#troubleshooting)

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Locust –∏ –≤—Å–µ—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
pip install -r requirements.txt

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏
locust --version
```

### 2. –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤–∞—à–µ FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—â–µ–Ω–æ:

```bash
# –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞ (–≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ)
uvicorn app.main:app --host 0.0.0.0 --port 8000 --reload
```

## üéØ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ó–∞–ø—É—Å–∫ —Å Web UI (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
# –ë–∞–∑–æ–≤—ã–π –∑–∞–ø—É—Å–∫ —Å –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º
locust --host=http://localhost:8000

# –û—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä –∏ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ http://localhost:8089
```

–í Web UI –≤—ã –º–æ–∂–µ—Ç–µ:
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (Number of users)
- –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–∫–æ—Ä–æ—Å—Ç—å –ø–æ—è–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (Spawn rate)
- –ó–∞–ø—É—Å—Ç–∏—Ç—å/–æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ç–µ—Å—Ç
- –ù–∞–±–ª—é–¥–∞—Ç—å –º–µ—Ç—Ä–∏–∫–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

### –ó–∞–ø—É—Å–∫ –≤ headless —Ä–µ–∂–∏–º–µ

```bash
# 100 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, 10 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ —Å–µ–∫—É–Ω–¥—É, 60 —Å–µ–∫—É–Ω–¥
locust --host=http://localhost:8000 --users 100 --spawn-rate 10 --run-time 60s --headless

# –° —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –æ—Ç—á–µ—Ç–æ–≤
locust --host=http://localhost:8000 --users 100 --spawn-rate 10 --run-time 60s --headless \
       --html=reports/load_test_report.html \
       --csv=reports/load_test
```

## üé≠ –î–æ—Å—Ç—É–ø–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### 1. `PublicAPIUser` (–≤–µ—Å: 3)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—É–±–ª–∏—á–Ω—ã—Ö API –±–µ–∑ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

**–≠–Ω–¥–ø–æ–∏–Ω—Ç—ã**:
- `GET /api/city/all` - –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –≥–æ—Ä–æ–¥–æ–≤
- `GET /api/city/?page={page}` - –ü–∞–≥–∏–Ω–∞—Ü–∏—è –≥–æ—Ä–æ–¥–æ–≤
- `GET /api/country/all` - –°–ø–∏—Å–æ–∫ —Å—Ç—Ä–∞–Ω
- `GET /api/sport/all` - –°–ø–∏—Å–æ–∫ –≤–∏–¥–æ–≤ —Å–ø–æ—Ä—Ç–∞
- `GET /api/city/get/{id}` - –ü–æ–ª—É—á–µ–Ω–∏–µ –≥–æ—Ä–æ–¥–∞ –ø–æ ID

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**:
```bash
locust --host=http://localhost:8000 PublicAPIUser
```

### 2. `AuthUser` (–≤–µ—Å: 2)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª–Ω–æ–≥–æ —Ü–∏–∫–ª–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ (—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è ‚Üí –ª–æ–≥–∏–Ω ‚Üí –ø—Ä–æ—Ñ–∏–ª—å)

**–°—Ü–µ–Ω–∞—Ä–∏–π**:
1. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
2. –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —Å –ø–æ–ª—É—á–µ–Ω–Ω—ã–º–∏ –∫—Ä–µ–¥–µ–Ω—à–∏–ª–∞–º–∏
3. –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–æ—Ñ–∏–ª—è

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**:
```bash
locust --host=http://localhost:8000 AuthUser --users 50 --spawn-rate 5
```

### 3. `ProductBrowserUser` (–≤–µ—Å: 2)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –°–∏–º—É–ª—è—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—é—â–µ–≥–æ —Ç–æ–≤–∞—Ä—ã

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è**: –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è `client/client123`)

**–≠–Ω–¥–ø–æ–∏–Ω—Ç—ã**:
- `GET /api/product/` - –ü—Ä–æ—Å–º–æ—Ç—Ä —Ç–æ–≤–∞—Ä–æ–≤
- `GET /api/product/get/{id}` - –î–µ—Ç–∞–ª–∏ —Ç–æ–≤–∞—Ä–∞
- `GET /api/product-category/all` - –ö–∞—Ç–µ–≥–æ—Ä–∏–∏
- `GET /api/cart/my-cart` - –ö–æ—Ä–∑–∏–Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**:
```bash
locust --host=http://localhost:8000 ProductBrowserUser
```

### 4. `AcademyBrowserUser` (–≤–µ—Å: 2)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç—ã —Å –∞–∫–∞–¥–µ–º–∏—è–º–∏ –∏ –≥—Ä—É–ø–ø–∞–º–∏

**–≠–Ω–¥–ø–æ–∏–Ω—Ç—ã**:
- `GET /api/academy/all` - –°–ø–∏—Å–æ–∫ –∞–∫–∞–¥–µ–º–∏–π
- `GET /api/academy/get/{id}` - –î–µ—Ç–∞–ª–∏ –∞–∫–∞–¥–µ–º–∏–∏
- `GET /api/academy-group/` - –ì—Ä—É–ø–ø—ã –∞–∫–∞–¥–µ–º–∏–π
- `GET /api/academy-group-schedule/all` - –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**:
```bash
locust --host=http://localhost:8000 AcademyBrowserUser
```

### 5. `FieldBrowserUser` (–≤–µ—Å: 2)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç—ã —Å –ø–æ–ª—è–º–∏ –∏ –ø–ª–æ—â–∞–¥–∫–∞–º–∏

**–≠–Ω–¥–ø–æ–∏–Ω—Ç—ã**:
- `GET /api/field/` - –°–ø–∏—Å–æ–∫ –ø–æ–ª–µ–π
- `GET /api/field/get/{id}` - –î–µ—Ç–∞–ª–∏ –ø–æ–ª—è
- `GET /api/field-party/all` - –ü–ª–æ—â–∞–¥–∫–∏
- `GET /api/field-party-schedule/all` - –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**:
```bash
locust --host=http://localhost:8000 FieldBrowserUser
```

### 6. `AdminOperationsUser` (–≤–µ—Å: 1)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è**: –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ (`admin/admin123`)

**–≠–Ω–¥–ø–æ–∏–Ω—Ç—ã**:
- `GET /api/user/all` - –°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- `GET /api/role/all` - –†–æ–ª–∏
- `GET /api/permission/all` - –†–∞–∑—Ä–µ—à–µ–Ω–∏—è
- `GET /api/product-order-admin/` - –ó–∞–∫–∞–∑—ã (–∞–¥–º–∏–Ω)

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**:
```bash
locust --host=http://localhost:8000 AdminOperationsUser --users 10 --spawn-rate 1
```

### 7. `MixedOperationsUser` (–≤–µ—Å: 4) ‚≠ê –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –†–µ–∞–ª–∏—Å—Ç–∏—á–Ω–∞—è —Å–∏–º—É–ª—è—Ü–∏—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**:
- –ö–æ–º–±–∏–Ω–∏—Ä—É–µ—Ç —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Ç–∏–ø—ã –∑–∞–ø—Ä–æ—Å–æ–≤
- 30% –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- –°–º–µ—à–∞–Ω–Ω—ã–µ –≤–µ—Å–∞ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**:
```bash
locust --host=http://localhost:8000 MixedOperationsUser --users 200 --spawn-rate 20
```

### 8. `StressTestUser` (–≤–µ—Å: 1) ‚ö†Ô∏è –≠–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω—ã–π

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ –¥–ª—è —Å—Ç—Ä–µ—Å—Å-—Ç–µ—Å—Ç–∞

**–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å –æ—Å—Ç–æ—Ä–æ–∂–Ω–æ—Å—Ç—å—é!

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**:
```bash
locust --host=http://localhost:8000 StressTestUser --users 500 --spawn-rate 50 --run-time 30s
```

## üìä –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –∑–∞–ø—É—Å–∫–∞

#### 1. –õ–µ–≥–∫–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ (smoke test)

```bash
locust --host=http://localhost:8000 --users 10 --spawn-rate 2 --run-time 30s --headless
```

#### 2. –°—Ä–µ–¥–Ω—è—è –Ω–∞–≥—Ä—É–∑–∫–∞ (–æ–±—ã—á–Ω—ã–π –¥–µ–Ω—å)

```bash
locust --host=http://localhost:8000 --users 100 --spawn-rate 10 --run-time 5m --headless \
       --html=reports/medium_load.html
```

#### 3. –í—ã—Å–æ–∫–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ (–ø–∏–∫–æ–≤—ã–µ —á–∞—Å—ã)

```bash
locust --host=http://localhost:8000 --users 500 --spawn-rate 50 --run-time 10m --headless \
       --html=reports/high_load.html
```

#### 4. –°—Ç—Ä–µ—Å—Å-—Ç–µ—Å—Ç (–º–∞–∫—Å–∏–º—É–º)

```bash
locust --host=http://localhost:8000 StressTestUser --users 1000 --spawn-rate 100 --run-time 5m --headless \
       --html=reports/stress_test.html
```

#### 5. –ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–π —Ç–µ—Å—Ç (–≤—Å–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏)

```bash
# –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
locust --host=http://localhost:8000 --users 300 --spawn-rate 30 --run-time 10m --headless \
       --html=reports/full_test.html \
       --csv=reports/full_test
```

#### 6. –°–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π

```bash
# –¢–æ–ª—å–∫–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–æ–≤
locust --host=http://localhost:8000 ProductBrowserUser --users 150 --spawn-rate 15 --run-time 5m
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

- `--users` (–∏–ª–∏ `-u`): –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–∏–º—É–ª–∏—Ä—É–µ–º—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- `--spawn-rate` (–∏–ª–∏ `-r`): –°–∫–æ—Ä–æ—Å—Ç—å –ø–æ—è–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π/—Å–µ–∫—É–Ω–¥—É)
- `--run-time` (–∏–ª–∏ `-t`): –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ç–µ—Å—Ç–∞ (30s, 5m, 1h)
- `--headless`: –ó–∞–ø—É—Å–∫ –±–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
- `--html`: –ü—É—Ç—å –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è HTML –æ—Ç—á–µ—Ç–∞
- `--csv`: –ü—Ä–µ—Ñ–∏–∫—Å –¥–ª—è CSV —Ñ–∞–π–ª–æ–≤ —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏
- `--host`: URL —Ç–µ—Å—Ç–∏—Ä—É–µ–º–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞

## üìà –ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

### –û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏

#### Request metrics

- **Type**: –¢–∏–ø HTTP –∑–∞–ø—Ä–æ—Å–∞ (GET, POST, etc.)
- **Name**: –ù–∞–∑–≤–∞–Ω–∏–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞
- **# Requests**: –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤
- **# Fails**: –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–µ—É–¥–∞—á–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- **Median**: –ú–µ–¥–∏–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ (ms)
- **Average**: –°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ (ms)
- **Min/Max**: –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ/–º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ (ms)
- **RPS**: –ó–∞–ø—Ä–æ—Å–æ–≤ –≤ —Å–µ–∫—É–Ω–¥—É (Requests Per Second)
- **Failures/s**: –û—à–∏–±–æ–∫ –≤ —Å–µ–∫—É–Ω–¥—É

### –¶–µ–ª–µ–≤—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ (SLA)

| –ú–µ—Ç—Ä–∏–∫–∞ | –•–æ—Ä–æ—à–æ | –ü—Ä–∏–µ–º–ª–µ–º–æ | –ü–ª–æ—Ö–æ |
|---------|--------|-----------|-------|
| **Average Response Time** | < 200ms | 200-500ms | > 500ms |
| **95th Percentile** | < 500ms | 500-1000ms | > 1000ms |
| **99th Percentile** | < 1000ms | 1000-2000ms | > 2000ms |
| **Error Rate** | < 0.1% | 0.1-1% | > 1% |
| **RPS (per server)** | > 100 | 50-100 | < 50 |

### –ê–Ω–∞–ª–∏–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

#### ‚úÖ –•–æ—Ä–æ—à–∏–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏
```
Type     Name                          # reqs      # fails  |    Avg     Min     Max  Median  |   req/s
GET      /api/city/all                   1523     0(0.00%)  |    142      87     456     140  |   50.77
GET      /api/product/ [browse]          1205     0(0.00%)  |    201     112     678     190  |   40.17
```

#### ‚ö†Ô∏è –ü—Ä–æ–±–ª–µ–º–Ω—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏
```
Type     Name                          # reqs      # fails  |    Avg     Min     Max  Median  |   req/s
GET      /api/product/get/[id]           856    42(4.91%)  |    867     234    5432    1200  |   28.53
POST     /api/cart/add-item               234    15(6.41%)  |   1523     456    8765    1800  |    7.80
```

**–ü—Ä–æ–±–ª–µ–º—ã**:
- –í—ã—Å–æ–∫–∏–π –ø—Ä–æ—Ü–µ–Ω—Ç –æ—à–∏–±–æ–∫ (> 1%)
- –ë–æ–ª—å—à–æ–µ —Å—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ (> 500ms)
- –ë–æ–ª—å—à–æ–π —Ä–∞–∑–±—Ä–æ—Å –º–µ–∂–¥—É Min –∏ Max (–Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å)

## üéØ Best Practices

### 1. –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ–µ —É–≤–µ–ª–∏—á–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏

```bash
# –ù–∞—á–Ω–∏—Ç–µ —Å –º–∞–ª–æ–≥–æ
locust --host=http://localhost:8000 --users 10 --spawn-rate 1

# –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ —É–≤–µ–ª–∏—á–∏–≤–∞–π—Ç–µ
locust --host=http://localhost:8000 --users 50 --spawn-rate 5
locust --host=http://localhost:8000 --users 100 --spawn-rate 10
locust --host=http://localhost:8000 --users 500 --spawn-rate 50
```

### 2. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–µ—Ä–≤–µ—Ä–∞

–í–æ –≤—Ä–µ–º—è —Ç–µ—Å—Ç–æ–≤ –º–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ:
- **CPU usage**: `top` –∏–ª–∏ `htop`
- **Memory usage**: `free -h`
- **Database connections**: PostgreSQL logs
- **Network**: `iftop` –∏–ª–∏ `nethogs`

```bash
# –í –æ—Ç–¥–µ–ª—å–Ω–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ
watch -n 1 'free -h && echo "---" && ps aux | grep uvicorn'
```

### 3. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ production-like –æ–∫—Ä—É–∂–µ–Ω–∏–∏

- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–µ –∂–µ –≤–µ—Ä—Å–∏–∏ Python –∏ –±–∏–±–ª–∏–æ—Ç–µ–∫
- –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ production
- –í–∫–ª—é—á–∏—Ç–µ –≤—Å–µ middleware –∏ authentication
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ gunicorn/uvicorn —Å workers

```bash
# Production-like –∑–∞–ø—É—Å–∫
gunicorn app.main:app --workers 4 --worker-class uvicorn.workers.UvicornWorker \
         --bind 0.0.0.0:8000 --timeout 120
```

### 4. –°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤

- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `MixedOperationsUser` –¥–ª—è —Ä–µ–∞–ª—å–Ω—ã—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤
- –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –≤–µ—Å–∞ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- –î–æ–±–∞–≤—å—Ç–µ `wait_time` –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏
- –°–∏–º—É–ª–∏—Ä—É–π—Ç–µ —Ä–µ–∞–ª—å–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### 5. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

```bash
# –°–æ–∑–¥–∞–π—Ç–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –¥–ª—è –æ—Ç—á–µ—Ç–æ–≤
mkdir -p reports

# –ó–∞–ø—É—Å–∫–∞–π—Ç–µ —Ç–µ—Å—Ç—ã —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
locust --host=http://localhost:8000 --users 100 --spawn-rate 10 --run-time 5m --headless \
       --html=reports/test_$(date +%Y%m%d_%H%M%S).html \
       --csv=reports/test_$(date +%Y%m%d_%H%M%S)
```

## üîß Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞: Connection refused

**–†–µ—à–µ–Ω–∏–µ**:
```bash
# –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω
uvicorn app.main:app --host 0.0.0.0 --port 8000

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å
curl http://localhost:8000/docs
```

### –ü—Ä–æ–±–ª–µ–º–∞: –í—ã—Å–æ–∫–∏–π –ø—Ä–æ—Ü–µ–Ω—Ç –æ—à–∏–±–æ–∫ 401 Unauthorized

**–†–µ—à–µ–Ω–∏–µ**:
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ credentials –≤ `locustfile.py`
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ seeders –≤—ã–ø–æ–ª–Ω–µ–Ω—ã (`admin/admin123`, `client/client123`)
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è —Ç–æ–∫–µ–Ω–æ–≤

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ seeders
python -c "import asyncio; from app.seeders.runner import run_seeders; asyncio.run(run_seeders())"
```

### –ü—Ä–æ–±–ª–µ–º–∞: Timeout errors

**–†–µ—à–µ–Ω–∏–µ**:
```python
# –í locustfile.py —É–≤–µ–ª–∏—á—å—Ç–µ timeout
class MyUser(HttpUser):
    connection_timeout = 10.0  # default: 10.0
    network_timeout = 10.0     # default: 10.0
```

### –ü—Ä–æ–±–ª–µ–º–∞: Database connection pool exhausted

**–†–µ—à–µ–Ω–∏–µ**:
```python
# –í app/infrastructure/db.py
engine = create_async_engine(
    DATABASE_URL,
    echo=False,
    pool_size=20,          # –£–≤–µ–ª–∏—á—å—Ç–µ pool_size
    max_overflow=40,       # –£–≤–µ–ª–∏—á—å—Ç–µ max_overflow
)
```

### –ü—Ä–æ–±–ª–µ–º–∞: Memory leak –ø—Ä–∏ –¥–ª–∏—Ç–µ–ª—å–Ω—ã—Ö —Ç–µ—Å—Ç–∞—Ö

**–†–µ—à–µ–Ω–∏–µ**:
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `--run-time` –¥–ª—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- –ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ memory usage
- –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–π—Ç–µ —Å–µ—Ä–≤–µ—Ä –º–µ–∂–¥—É —Ç–µ—Å—Ç–∞–º–∏

```bash
# –û–≥—Ä–∞–Ω–∏—á—å—Ç–µ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
locust --host=http://localhost:8000 --users 100 --spawn-rate 10 --run-time 10m
```

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [–û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Locust](https://docs.locust.io/)
- [Best Practices for Load Testing](https://docs.locust.io/en/stable/writing-a-locustfile.html)
- [Distributed Load Testing](https://docs.locust.io/en/stable/running-distributed.html)

## üéì –ü—Ä–∏–º–µ—Ä—ã –∫–æ–º–∞–Ω–¥ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ü–µ–ª–µ–π

### CI/CD Integration

```bash
# –ë—ã—Å—Ç—Ä—ã–π smoke test –¥–ª—è CI
locust --host=http://localhost:8000 --users 10 --spawn-rate 2 --run-time 1m --headless --only-summary

# Exit code != 0 –µ—Å–ª–∏ –µ—Å—Ç—å –æ—à–∏–±–∫–∏
locust --host=http://localhost:8000 --users 50 --spawn-rate 5 --run-time 2m --headless \
       --expect-workers 1 --exit-code-on-error 1
```

### Capacity Planning

```bash
# –ù–∞–π–¥–∏—Ç–µ –º–∞–∫—Å–∏–º–∞–ª—å–Ω—É—é –ø—Ä–æ–ø—É—Å–∫–Ω—É—é —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å
# –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ —É–≤–µ–ª–∏—á–∏–≤–∞–π—Ç–µ users –¥–æ –ø–æ—è–≤–ª–µ–Ω–∏—è –æ—à–∏–±–æ–∫

for users in 50 100 200 500 1000; do
  echo "Testing with $users users..."
  locust --host=http://localhost:8000 --users $users --spawn-rate 50 --run-time 2m --headless \
         --html=reports/capacity_${users}_users.html
  sleep 30  # –î–∞–π—Ç–µ —Å–µ—Ä–≤–µ—Ä—É –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è
done
```

### Endurance Testing (–¥–ª–∏—Ç–µ–ª—å–Ω—ã–π —Ç–µ—Å—Ç)

```bash
# 12-—á–∞—Å–æ–≤–æ–π —Ç–µ—Å—Ç –¥–ª—è –ø–æ–∏—Å–∫–∞ memory leaks
locust --host=http://localhost:8000 --users 100 --spawn-rate 10 --run-time 12h --headless \
       --html=reports/endurance_test.html \
       --csv=reports/endurance_test
```

---

**–£–¥–∞—á–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è! üöÄ**
